import streamlit as st

st.title("ğŸˆ My new app")
st.write(
    "Let's start building! For help and inspiration, head over to [docs.streamlit.io](https://docs.streamlit.io/)."
)
import streamlit as st
# ê¸°ì¡´ ì½”ë“œ: st.title("My First App")
# ìˆ˜ì • ì½”ë“œ:
st.title("ğŸ« ìš°ë¦¬ë°˜ ì•Œë¦¼ì¥")
st.write("ìš°ë¦¬ ë°˜ì˜ ì¤‘ìš”í•œ ì†Œì‹ì„ í™•ì¸í•˜ì„¸ìš”!")
import streamlit as st

# --- 1. ì•± ì´ˆê¸° ì„¤ì • ---

# st.set_page_configë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ ì œëª©ê³¼ ì•„ì´ì½˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.
# ì´ ì½”ë“œëŠ” ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í•œ ë²ˆë§Œ, ê·¸ë¦¬ê³  ë‹¤ë¥¸ Streamlit ëª…ë ¹ì–´ë³´ë‹¤ ë¨¼ì € í˜¸ì¶œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
st.set_page_config(
    page_title="MBTI í•™ìŠµ ìœ í˜• ì§„ë‹¨",
    page_icon="ğŸ§ ",
)

# --- 2. ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™” ---

# st.session_stateë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ë‹µë³€ê³¼ ì§„ë‹¨ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
# ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ìœ„ì ¯ê³¼ ìƒí˜¸ì‘ìš©í•  ë•Œë§ˆë‹¤ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
if 'submitted' not in st.session_state:
    st.session_state.submitted = False
if 'user_answers' not in st.session_state:
    st.session_state.user_answers = {}
if 'mbti_result' not in st.session_state:
    st.session_state.mbti_result = ""

# --- 3. ì•± ì œëª© ë° ì„¤ëª… ---

st.title("ğŸ§‘â€ğŸ’» MBTI í•™ìŠµ ìœ í˜• ì§„ë‹¨ ğŸ§ ")
st.write(
    "ì•„ë˜ì˜ ê°„ë‹¨í•œ ì§ˆë¬¸ë“¤ì„ í†µí•´ ìì‹ ì˜ í•™ìŠµ ìŠ¤íƒ€ì¼ê³¼ ì„ í˜¸í•˜ëŠ” í•™ìŠµ í™˜ê²½ì„ ì•Œì•„ë³´ì„¸ìš”."
)
st.write("---")


# --- 4. MBTI ì§ˆë¬¸ ë° ê²°ê³¼ ë°ì´í„° ---

# ê° MBTI ì§€í‘œë³„ ì§ˆë¬¸ ëª©ë¡
questions = {
    'EI': '1. ì—¬ëŸ¬ ì‚¬ëŒê³¼ í•¨ê»˜ ê³µë¶€í•˜ëŠ” ê²ƒì´ í˜¼ì ê³µë¶€í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì¦ê²ë‹¤.',
    'SN': '2. ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ë•Œ, ì‹¤ì œ ì‚¬ë¡€ë‚˜ ê²½í—˜ì„ í†µí•´ ë°°ìš°ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.',
    'TF': '3. ê³¼ì œ ìˆ˜í–‰ ì‹œ, ë…¼ë¦¬ì ì´ê³  ê°ê´€ì ì¸ ê¸°ì¤€ì„ ë”°ë¥´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.',
    'JP': '4. í•™ìŠµ ê³„íšì„ ì„¸ìš¸ ë•Œ, ë¯¸ë¦¬ ì²´ê³„ì ìœ¼ë¡œ ê³„íšì„ ì„¸ìš°ê³  ë”°ë¥´ëŠ” í¸ì´ë‹¤.',
    'EI_2': '5. í† ë¡  ìˆ˜ì—…ì—ì„œ ì ê·¹ì ìœ¼ë¡œ ì˜ê²¬ì„ ë‚´ê¸°ë³´ë‹¤ëŠ” ì£¼ë¡œ ë“£ëŠ” í¸ì´ë‹¤.',
    'SN_2': '6. ì¶”ìƒì ì¸ ì´ë¡ ì´ë‚˜ ê°œë…ì„ íƒêµ¬í•˜ëŠ” ê²ƒì— í¥ë¯¸ë¥¼ ëŠë‚€ë‹¤.',
    'TF_2': '7. íŒ€ í”„ë¡œì íŠ¸ì—ì„œ ë™ë£Œì˜ ê°ì •ì„ ê³ ë ¤í•˜ì—¬ ì¡°í™”ë¡œìš´ ê´€ê³„ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•˜ë‹¤.',
    'JP_2': '8. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ê³¼ì œë‚˜ ê³„íš ë³€ê²½ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆë‹¤.'
}

# MBTI ìœ í˜•ë³„ í•™ìŠµ ìŠ¤íƒ€ì¼ ì„¤ëª…
learning_styles = {
    'ISTJ': 'ì²´ê³„ì ì´ê³  ì‚¬ì‹¤ ê¸°ë°˜ì˜ í•™ìŠµì„ ì„ í˜¸í•©ë‹ˆë‹¤. ì¡°ìš©í•˜ê³  ì§ˆì„œ ìˆëŠ” í™˜ê²½ì—ì„œ ì§‘ì¤‘ë ¥ì´ ë†’ìŠµë‹ˆë‹¤.',
    'ISFJ': 'êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµí•˜ë©°, ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ëŠ” ê³¼ì •ì—ì„œ í•™ìŠµ ë™ê¸°ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤.',
    'INFJ': 'í†µì°°ë ¥ê³¼ ì˜ë¯¸ë¥¼ ì¤‘ì‹œí•˜ë©°, ê°œë…ë“¤ ì‚¬ì´ì˜ ì—°ê´€ì„±ì„ íŒŒì•…í•˜ëŠ” ë° ëŠ¥ìˆ™í•©ë‹ˆë‹¤. ë…ë¦½ì ì¸ í•™ìŠµ í™˜ê²½ì„ ì„ í˜¸í•©ë‹ˆë‹¤.',
    'INTJ': 'ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì¸ ì‚¬ê³ ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë³µì¡í•œ ì´ë¡ ì„ íƒêµ¬í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. ë†’ì€ ê¸°ì¤€ì„ ê°€ì§€ê³  ìŠ¤ìŠ¤ë¡œ í•™ìŠµí•©ë‹ˆë‹¤.',
    'ISTP': 'ì§ì ‘ ê²½í—˜í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ì¥ ì˜ ë°°ì›ë‹ˆë‹¤. ìœ ì—°í•˜ê³  ì‹¤ìš©ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.',
    'ISFP': 'ì¡°í™”ë¡œìš´ í™˜ê²½ì—ì„œ ë¯¸ì  ê°ê°ê³¼ ê°€ì¹˜ë¥¼ íƒêµ¬í•˜ëŠ” í•™ìŠµì„ ì¦ê¹ë‹ˆë‹¤. í˜‘ë ¥ì ì¸ ë¶„ìœ„ê¸°ì—ì„œ ëŠ¥ë¥ ì´ ì˜¤ë¦…ë‹ˆë‹¤.',
    'INFP': 'ìì‹ ì˜ ê°€ì¹˜ì™€ ì‹ ë…ì— ë¶€í•©í•˜ëŠ” ë‚´ìš©ì„ í•™ìŠµí•  ë•Œ ë™ê¸°ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤. ì°½ì˜ì ì´ê³  ìƒìƒë ¥ì´ í’ë¶€í•©ë‹ˆë‹¤.',
    'INTP': 'ë…¼ë¦¬ì ì´ê³  ë¹„íŒì ì¸ ì‚¬ê³ ë¡œ ì•„ì´ë””ì–´ë¥¼ ë¶„ì„í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. ì§€ì  í˜¸ê¸°ì‹¬ì´ ê°•í•˜ê³  ë…ë¦½ì ì¸ í•™ìŠµì„ ì„ í˜¸í•©ë‹ˆë‹¤.',
    'ESTP': 'í™œë™ì ì´ê³  ê²½í—˜ ì¤‘ì‹¬ì˜ í•™ìŠµì„ ì„ í˜¸í•©ë‹ˆë‹¤. ì‹¤ì œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©° ë°°ìš°ëŠ” ê²ƒì— ëŠ¥ìˆ™í•©ë‹ˆë‹¤.',
    'ESFP': 'ì‚¬ëŒë“¤ê³¼ êµë¥˜í•˜ë©° ì¬ë¯¸ìˆê³  í™œë™ì ì¸ í™˜ê²½ì—ì„œ í•™ìŠµí•  ë•Œ ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤. ì‹¤ìš©ì ì¸ ì •ë³´ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤.',
    'ENFP': 'ì—´ì •ì ì´ê³  ì°½ì˜ì ìœ¼ë¡œ ë‹¤ì–‘í•œ ê°€ëŠ¥ì„±ì„ íƒêµ¬í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. í˜‘ë ¥ì ì¸ í™˜ê²½ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•˜ë©° ë°°ì›ë‹ˆë‹¤.',
    'ENTP': 'ì§€ì ì¸ ë„ì „ì„ ì¦ê¸°ë©°, ë…¼ìŸê³¼ í† ë¡ ì„ í†µí•´ ì•„ì´ë””ì–´ë¥¼ ë°œì „ì‹œí‚¤ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤. ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ëŠ¥ìˆ™í•©ë‹ˆë‹¤.',
    'ESTJ': 'ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” í•™ìŠµì„ ì„ í˜¸í•©ë‹ˆë‹¤. ëª…í™•í•œ ê·œì¹™ê³¼ êµ¬ì¡°ê°€ ìˆëŠ” í™˜ê²½ì—ì„œ ëŠ¥ë¥ ì´ ì˜¤ë¦…ë‹ˆë‹¤.',
    'ESFJ': 'ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ í˜‘ë ¥í•˜ê³  ì†Œí†µí•˜ë©° ë°°ìš°ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. ì¡°í™”ë¡œìš´ ë¶„ìœ„ê¸° ì†ì—ì„œ í•™ìŠµ ë™ê¸°ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤.',
    'ENFJ': 'ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ í†µí•´ ë°°ìš°ê³  ì„±ì¥í•˜ëŠ” ê²ƒì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì‚¬ëŒì„ ì´ëŒê³  ì˜ê°ì„ ì£¼ë©° í•™ìŠµ íš¨ê³¼ë¥¼ ë†’ì…ë‹ˆë‹¤.',
    'ENTJ': 'ì „ëµì ì´ê³  ëª©í‘œ ì§€í–¥ì ì¸ í•™ìŠµì„ ì„ í˜¸í•©ë‹ˆë‹¤. íš¨ìœ¨ì ì¸ ë°©ì‹ìœ¼ë¡œ ì§€ì‹ì„ ìŠµë“í•˜ê³  ì´ë¥¼ ì‹¤ì œ ìƒí™©ì— ì ìš©í•˜ëŠ” ë° ëŠ¥ìˆ™í•©ë‹ˆë‹¤.'
}

# --- 5. ì§ˆë¬¸ í¼(Form) ìƒì„± ---

# st.formì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ìœ„ì ¯ì„ ê·¸ë£¹í™”í•˜ê³  'ì œì¶œ' ë²„íŠ¼ì„ í•œ ë²ˆë§Œ ëˆŒëŸ¬ ëª¨ë“  ì…ë ¥ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
# ì´ëŠ” ê° ë¼ë””ì˜¤ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ ì•±ì´ ì¬ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë°©ì§€í•´ ì¤ë‹ˆë‹¤.
with st.form("mbti_form"):
    st.subheader("ì•„ë˜ ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”.")

    user_answers = {}
    # ì§ˆë¬¸ ëª©ë¡ì„ ìˆœíšŒí•˜ë©° ë¼ë””ì˜¤ ë²„íŠ¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
    for key, question in questions.items():
        user_answers[key] = st.radio(
            question,
            ('ì˜ˆ', 'ì•„ë‹ˆì˜¤'),
            key=f"q_{key}",  # ê° ìœ„ì ¯ì— ê³ ìœ í•œ keyë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.
            horizontal=True, # ë²„íŠ¼ì„ ê°€ë¡œë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
            label_visibility='collapsed' # ì§ˆë¬¸ì´ ë¼ë²¨ ì—­í• ì„ í•˜ë¯€ë¡œ ë¼ë²¨ì€ ìˆ¨ê¹ë‹ˆë‹¤.
        )
    
    # st.form_submit_buttonì€ í¼ ë‚´ë¶€ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
    submitted = st.form_submit_button("ê²°ê³¼ í™•ì¸í•˜ê¸°")


# --- 6. ê²°ê³¼ ì²˜ë¦¬ ë° í‘œì‹œ ---

# 'ê²°ê³¼ í™•ì¸í•˜ê¸°' ë²„íŠ¼ì´ ëˆŒë ¸ì„ ë•Œ ì‹¤í–‰ë  ë¡œì§
if submitted:
    st.session_state.submitted = True
    st.session_state.user_answers = user_answers

    # MBTI ì§€í‘œ ê³„ì‚° ë¡œì§
    # ê° ì§€í‘œë³„ë¡œ ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ì—¬ ìµœì¢… ìœ í˜•ì„ ê²°ì •í•©ë‹ˆë‹¤.
    scores = {'E': 0, 'I': 0, 'S': 0, 'N': 0, 'T': 0, 'F': 0, 'J': 0, 'P': 0}

    # EI
    if user_answers['EI'] == 'ì˜ˆ': scores['E'] += 1
    else: scores['I'] += 1
    if user_answers['EI_2'] == 'ì•„ë‹ˆì˜¤': scores['E'] += 1
    else: scores['I'] += 1

    # SN
    if user_answers['SN'] == 'ì˜ˆ': scores['S'] += 1
    else: scores['N'] += 1
    if user_answers['SN_2'] == 'ì˜ˆ': scores['N'] += 1
    else: scores['S'] += 1

    # TF
    if user_answers['TF'] == 'ì˜ˆ': scores['T'] += 1
    else: scores['F'] += 1
    if user_answers['TF_2'] == 'ì•„ë‹ˆì˜¤': scores['T'] += 1
    else: scores['F'] += 1
    
    # JP
    if user_answers['JP'] == 'ì˜ˆ': scores['J'] += 1
    else: scores['P'] += 1
    if user_answers['JP_2'] == 'ì•„ë‹ˆì˜¤': scores['J'] += 1
    else: scores['P'] += 1

    # ìµœì¢… MBTI ìœ í˜• ê²°ì •
    mbti = ""
    mbti += "E" if scores['E'] > scores['I'] else "I"
    mbti += "S" if scores['S'] > scores['N'] else "N"
    mbti += "T" if scores['T'] > scores['F'] else "F"
    mbti += "J" if scores['J'] > scores['P'] else "P"
    
    st.session_state.mbti_result = mbti

# ì„¸ì…˜ ìƒíƒœì— ê²°ê³¼ê°€ ìˆìœ¼ë©´ (ì¦‰, ì œì¶œ ë²„íŠ¼ì´ ëˆŒë ¸ìœ¼ë©´) ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
if st.session_state.submitted:
    st.write("---")
    st.subheader("ğŸ‰ ì§„ë‹¨ ê²°ê³¼")

    result = st.session_state.mbti_result
    
    # ê²°ê³¼ê°€ ìœ íš¨í•œì§€ í™•ì¸ í›„ í‘œì‹œí•©ë‹ˆë‹¤.
    if result in learning_styles:
        st.info(f"ë‹¹ì‹ ì˜ MBTI í•™ìŠµ ìœ í˜•ì€ **{result}** ì…ë‹ˆë‹¤.")
        st.write(learning_styles[result])
    else:
        st.error("ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")

    # ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸° ë²„íŠ¼
    if st.button("ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°"):
        # ì„¸ì…˜ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•˜ì—¬ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
        st.session_state.submitted = False
        st.session_state.user_answers = {}
        st.session_state.mbti_result = ""
        st.rerun() # í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.
        
